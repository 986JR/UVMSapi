<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renew License | University Vendor Management System</title>
    <link rel="stylesheet" href="css/uvms-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>UDOM VMS</h3>
            <p>Vendor Portal</p>
        </div>
        <nav class="sidebar-nav">
            <a href="../../dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            <a href="colleges.html"><i class="fas fa-university"></i> Academic Units</a>
            <a href="tenders.html"><i class="fas fa-file-contract"></i> Tenders</a>
            <a href="applications.html"><i class="fas fa-clipboard-list"></i> Applications</a>
            <a href="licenses.html"><i class="fas fa-certificate"></i> Licenses</a>
            <a href="contracts.html"><i class="fas fa-file-signature"></i> Contracts</a>
            <a href="renew-license.html" class="active"><i class="fas fa-sync-alt"></i> Renew License</a>
            <a href="policies.html"><i class="fas fa-book"></i> Policies</a>
            <a href="notifications.html"><i class="fas fa-bell"></i> Notifications</a>
            <a href="login.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </nav>
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-brand">License Renewal</div>
        <div class="navbar-user">
            <div class="user-avatar">JD</div>
            <span>John Doe</span>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Page Header -->
        <div class="flex flex-between align-center mb-3 flex-mobile-stack">
            <div class="mb-mobile-2">
                <h1 style="margin-bottom: 5px;">License Renewal</h1>
                <p style="color: var(--uvms-text-secondary-light); margin: 0; font-size: 0.9em;">Renew your vendor license to continue operations</p>
            </div>
            <div class="flex gap-1">
                <a href="licenses.html" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> <span class="hide-mobile">Back to Licenses</span>
                </a>
                <span class="badge badge-warning">Expires in 12 days</span>
            </div>
        </div>

        <div class="alert alert-info mb-3">
            <i class="fas fa-info-circle"></i> Please complete all sections of this renewal form and upload required documents. Incomplete applications will not be processed.
        </div>

        <!-- License Details -->
        <div class="card mb-3">
            <div class="card-body">
                <h4 style="margin-bottom: 15px; color: var(--uvms-blue-primary);">Current License Information</h4>
                <div class="grid grid-2 gap-3">
                    <div>
                        <p style="margin: 8px 0;"><strong>License Type:</strong> Construction License</p>
                        <p style="margin: 8px 0;"><strong>License Number:</strong> VL-2024-0875</p>
                        <p style="margin: 8px 0;"><strong>Current Status:</strong> <span class="badge badge-warning">Expiring Soon</span></p>
                    </div>
                    <div>
                        <p style="margin: 8px 0;"><strong>Issued Date:</strong> January 15, 2024</p>
                        <p style="margin: 8px 0;"><strong>Expiry Date:</strong> <span style="color: var(--uvms-error-red); font-weight: 500;">January 14, 2025</span></p>
                        <p style="margin: 8px 0;"><strong>Issuing Authority:</strong> UDOM Licensing Board</p>
                    </div>
                </div>
            </div>
        </div>

        <form id="licenseRenewalForm">
            <!-- Renewal Information -->
            <div class="card mb-3">
                <div class="card-body">
                    <h4 style="margin-bottom: 15px; color: var(--uvms-blue-primary);">Renewal Information</h4>

                    <div class="grid grid-2 gap-3 mb-3">
                        <div class="form-group">
                            <label for="renewalPeriod" class="form-label">Renewal Period *</label>
                            <select class="form-input" id="renewalPeriod" required>
                                <option value="">Select renewal period</option>
                                <option value="1">1 Year</option>
                                <option value="2">2 Years</option>
                                <option value="3">3 Years</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="expectedDate" class="form-label">Expected Renewal Date</label>
                            <input type="text" class="form-input" id="expectedDate" value="January 15, 2026" readonly>
                        </div>
                    </div>

                    <div class="form-group mb-3">
                        <label for="renewalReason" class="form-label">Reason for Renewal *</label>
                        <textarea class="form-input" id="renewalReason" rows="3" placeholder="Explain why you need to renew this license" required></textarea>
                    </div>
                </div>
            </div>

            <!-- Company Information -->
            <div class="card mb-3">
                <div class="card-body">
                    <h4 style="margin-bottom: 15px; color: var(--uvms-blue-primary);">Company Information</h4>

                    <div class="grid grid-2 gap-3 mb-3">
                        <div class="form-group">
                            <label for="companyName" class="form-label">Company Name *</label>
                            <input type="text" class="form-input" id="companyName" value="ABC Construction Ltd." readonly>
                        </div>
                        <div class="form-group">
                            <label for="registrationNo" class="form-label">Registration Number *</label>
                            <input type="text" class="form-input" id="registrationNo" value="REG-123456789" readonly>
                        </div>
                    </div>

                    <div class="grid grid-2 gap-3 mb-3">
                        <div class="form-group">
                            <label for="contactPerson" class="form-label">Contact Person *</label>
                            <input type="text" class="form-input" id="contactPerson" value="Juma Shabaab" required>
                        </div>
                        <div class="form-group">
                            <label for="contactEmail" class="form-label">Contact Email *</label>
                            <input type="email" class="form-input" id="contactEmail" value="juma@abcconstruction.com" required>
                        </div>
                    </div>

                    <div class="grid grid-2 gap-3 mb-3">
                        <div class="form-group">
                            <label for="contactPhone" class="form-label">Contact Phone *</label>
                            <input type="tel" class="form-input" id="contactPhone" value="+255 712-456-587" required>
                        </div>
                        <div class="form-group">
                            <label for="companyAddress" class="form-label">Company Address *</label>
                            <input type="text" class="form-input" id="companyAddress" value="123 Construction Ave, Building City" required>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documents Upload -->
            <div class="card mb-3">
                <div class="card-body">
                    <h4 style="margin-bottom: 15px; color: var(--uvms-blue-primary);">Required Documents</h4>

                    <div class="alert alert-warning mb-3">
                        <i class="fas fa-exclamation-triangle"></i> The following documents are mandatory for your renewal application to be processed.
                    </div>

                    <div class="upload-area" onclick="document.getElementById('fileUpload').click()" style="border: 2px dashed var(--uvms-border-light); border-radius: 8px; padding: 30px; text-align: center; margin-bottom: 20px; transition: all 0.3s; cursor: pointer; background: var(--uvms-background-light);">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 2.5rem; color: var(--uvms-blue-primary); margin-bottom: 10px;"></i>
                        <h5 style="margin: 10px 0; color: var(--uvms-blue-primary);">Drag & Drop or Click to Upload</h5>
                        <p style="color: var(--uvms-text-secondary-light); margin: 0;">Supported formats: PDF, JPG, PNG (Max 10MB each)</p>
                        <input type="file" id="fileUpload" multiple hidden>
                    </div>

                    <h5 style="margin: 20px 0 15px 0; color: var(--uvms-blue-primary);">Uploaded Files</h5>
                    <div class="uploaded-files" style="margin-bottom: 20px;">
                        <div class="file-item" style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--uvms-background-light); border-radius: 6px; margin-bottom: 10px;">
                            <div style="display: flex; align-items: center;">
                                <i class="fas fa-file-pdf" style="color: var(--uvms-error-red); margin-right: 10px;"></i>
                                <span>current-license.pdf</span>
                                <small style="color: var(--uvms-text-secondary-light); margin-left: 10px;">(1.2 MB)</small>
                            </div>
                            <button type="button" class="btn btn-sm btn-outline-danger">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="file-item" style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--uvms-background-light); border-radius: 6px; margin-bottom: 10px;">
                            <div style="display: flex; align-items: center;">
                                <i class="fas fa-file-pdf" style="color: var(--uvms-error-red); margin-right: 10px;"></i>
                                <span>tax-compliance.pdf</span>
                                <small style="color: var(--uvms-text-secondary-light); margin-left: 10px;">(0.8 MB)</small>
                            </div>
                            <button type="button" class="btn btn-sm btn-outline-danger">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>

                    <h5 style="margin: 20px 0 15px 0; color: var(--uvms-blue-primary);">Required Documents Checklist</h5>
                    <div class="checklist" style="margin-bottom: 20px;">
                        <div class="form-check" style="margin-bottom: 12px;">
                            <input type="checkbox" id="check1" required>
                            <label for="check1" style="margin-left: 8px;">Current License Copy</label>
                        </div>
                        <div class="form-check" style="margin-bottom: 12px;">
                            <input type="checkbox" id="check2" required>
                            <label for="check2" style="margin-left: 8px;">Tax Compliance Certificate</label>
                        </div>
                        <div class="form-check" style="margin-bottom: 12px;">
                            <input type="checkbox" id="check3" required>
                            <label for="check3" style="margin-left: 8px;">Insurance Certificate</label>
                        </div>
                        <div class="form-check" style="margin-bottom: 12px;">
                            <input type="checkbox" id="check4" required>
                            <label for="check4" style="margin-left: 8px;">Company Registration Proof</label>
                        </div>
                        <div class="form-check" style="margin-bottom: 12px;">
                            <input type="checkbox" id="check5" required>
                            <label for="check5" style="margin-left: 8px;">Renewal Application Form</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Information -->
            <div class="card mb-3">
                <div class="card-body">
                    <h4 style="margin-bottom: 15px; color: var(--uvms-blue-primary);">Payment Information</h4>

                    <div class="grid grid-2 gap-3 mb-3">
                        <div class="form-group">
                            <label for="renewalFee" class="form-label">Renewal Fee</label>
                            <div style="display: flex; border: 1px solid var(--uvms-border-light); border-radius: 4px; overflow: hidden;">
                                <span style="background: var(--uvms-background-light); padding: 8px 12px; border-right: 1px solid var(--uvms-border-light);">TSh</span>
                                <input type="text" class="form-input" id="renewalFee" value="250,000.00" readonly style="border: none; border-radius: 0;">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="processingFee" class="form-label">Processing Fee</label>
                            <div style="display: flex; border: 1px solid var(--uvms-border-light); border-radius: 4px; overflow: hidden;">
                                <span style="background: var(--uvms-background-light); padding: 8px 12px; border-right: 1px solid var(--uvms-border-light);">TSh</span>
                                <input type="text" class="form-input" id="processingFee" value="50,000.00" readonly style="border: none; border-radius: 0;">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group mb-4">
                        <label for="totalFee" class="form-label">Total Amount Due</label>
                        <div style="display: flex; border: 2px solid var(--uvms-blue-primary); border-radius: 4px; overflow: hidden;">
                            <span style="background: var(--uvms-blue-primary); color: white; padding: 8px 12px; border-right: 1px solid var(--uvms-blue-primary);">TSh</span>
                            <input type="text" class="form-input" id="totalFee" value="300,000.00" readonly style="border: none; border-radius: 0; font-weight: 600;">
                        </div>
                    </div>
                    
                    <h5 style="margin: 20px 0 15px 0; color: var(--uvms-blue-primary);">Payment Method</h5>
                    <div class="form-group mb-3">
                        <div class="form-check" style="margin-bottom: 12px;">
                            <input type="radio" name="paymentMethod" id="creditCard" value="creditCard" required>
                            <label for="creditCard" style="margin-left: 8px;">Credit/Debit Card</label>
                        </div>
                        <div class="form-check" style="margin-bottom: 12px;">
                            <input type="radio" name="paymentMethod" id="bankTransfer" value="bankTransfer" required>
                            <label for="bankTransfer" style="margin-left: 8px;">Bank Transfer</label>
                        </div>
                        <div class="form-check" style="margin-bottom: 12px;">
                            <input type="radio" name="paymentMethod" id="digitalWallet" value="digitalWallet" required>
                            <label for="digitalWallet" style="margin-left: 8px;">Mobile Money (M-Pesa, Tigo Pesa)</label>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i> Payment will be processed after your renewal application is approved.
                    </div>
                </div>
            </div>
            
            <!-- Terms and Conditions -->
            <div class="card mb-3">
                <div class="card-body">
                    <h4 style="margin-bottom: 15px; color: var(--uvms-blue-primary);">Terms and Conditions</h4>
                    
                    <div style="max-height: 200px; overflow-y: auto; padding: 15px; border: 1px solid var(--uvms-border-light); border-radius: 6px; background: var(--uvms-background-light); margin-bottom: 20px;">
                        <h6 style="color: var(--uvms-blue-primary); margin-bottom: 8px;">1. Renewal Process</h6>
                        <p style="margin-bottom: 15px; font-size: 0.9em;">License renewal applications are subject to review and approval by UDOM licensing authority. Submission does not guarantee renewal.</p>
                        
                        <h6 style="color: var(--uvms-blue-primary); margin-bottom: 8px;">2. Processing Time</h6>
                        <p style="margin-bottom: 15px; font-size: 0.9em;">Standard processing time is 15-20 business days. Expedited processing may be available for an additional fee.</p>
                        
                        <h6 style="color: var(--uvms-blue-primary); margin-bottom: 8px;">3. Documentation</h6>
                        <p style="margin-bottom: 15px; font-size: 0.9em;">All required documents must be submitted for the application to be processed. Incomplete applications will be rejected.</p>
                        
                        <h6 style="color: var(--uvms-blue-primary); margin-bottom: 8px;">4. Fees</h6>
                        <p style="margin-bottom: 15px; font-size: 0.9em;">All fees are non-refundable, regardless of application outcome. Payment is required upon submission of the renewal application.</p>
                        
                        <h6 style="color: var(--uvms-blue-primary); margin-bottom: 8px;">5. Compliance</h6>
                        <p style="margin-bottom: 0; font-size: 0.9em;">License holders must remain in compliance with all UDOM regulations throughout the renewal process.</p>
                    </div>
                    
                    <div class="form-check">
                        <input type="checkbox" id="termsAgreement" required>
                        <label for="termsAgreement" style="margin-left: 8px;">I have read and agree to the terms and conditions *</label>
                    </div>
                </div>
            </div>
            
            <!-- Submission -->
            <div class="card">
                <div class="card-body">
                    <div class="flex flex-between align-center flex-mobile-stack">
                        <button type="button" class="btn btn-secondary mb-mobile-2">
                            <i class="fas fa-save"></i> Save Draft
                        </button>
                        <div class="flex gap-1">
                            <button type="button" class="btn btn-outline-primary">
                                <i class="fas fa-eye"></i> <span class="hide-mobile">Preview</span>
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i> Submit Application
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <script src="js/uvms-main.js"></script>
    <script>
        document.getElementById('licenseRenewalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Form validation
            const renewalPeriod = document.getElementById('renewalPeriod').value;
            const renewalReason = document.getElementById('renewalReason').value;
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
            
            if (!renewalPeriod || !renewalReason || !paymentMethod) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // Check if all required documents are uploaded
            const checkboxes = document.querySelectorAll('.form-check-input');
            for (let checkbox of checkboxes) {
                if (!checkbox.checked && checkbox.id !== 'termsAgreement') {
                    alert('Please confirm that you have uploaded all required documents.');
                    return;
                }
            }
            
            // If all validations pass, show success message
            alert('Your license renewal application has been submitted successfully!');
            window.location.href = 'licenses.html';
        });
        
        // Set expected renewal date based on selected period
        document.getElementById('renewalPeriod').addEventListener('change', function() {
            const period = this.value;
            if (period) {
                const months = parseInt(period) * 12;
                const expectedDate = new Date();
                expectedDate.setMonth(expectedDate.getMonth() + months);
                
                const formattedDate = expectedDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                document.getElementById('expectedDate').value = formattedDate;
            }
        });
    </script>
</body>
</html>